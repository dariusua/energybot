#  ENERGYLOEBOT version 1.5.7 by dariusua

import sqlite3
import time
import telebot
import schedule
import logging
from datetime import datetime, timedelta
from telebot import types
from threading import Thread, Lock
from config import TOKEN


logging.basicConfig(level=logging.INFO)
bot = telebot.TeleBot(TOKEN)
timeworked = 0

markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
item1 = types.KeyboardButton("‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è")
item2 = types.KeyboardButton("üîï –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è")
item3 = types.KeyboardButton("üñº –ü–æ–≤–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫(—Ñ–æ—Ç–æ)")
item4 = types.KeyboardButton("‚öô –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è")
markup.add(item1, item2).row(item3).add(item4)

markup_settings = types.InlineKeyboardMarkup(row_width=1)
item1 = types.InlineKeyboardButton(text="üåô –ù—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è", callback_data='night_notice')
item2 = types.InlineKeyboardButton(text="üîò –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è", callback_data='maybe_notice')
item3 = types.InlineKeyboardButton(text="üïê –ß–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è", callback_data='change_time_to_notice')
item4 = types.InlineKeyboardButton(text="‚¨Ö –ù–∞–∑–∞–¥", callback_data='back')
markup_settings.add(item1, item2, item3, item4)

def connect_db():
    connect = sqlite3.connect('database.db')
    return connect

mutex = Lock()

def locked(f):
    def f_locked(*args, **kwargs):
        with mutex:
            return f(*args, **kwargs)
    return f_locked
# –ü–æ—á–∞—Ç–æ–∫ —Ä–æ–±–æ—Ç–∏, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
@bot.message_handler(commands=['start'])
@locked
def start(message: types.Message):
    connect = connect_db()
    cursor = connect.cursor()
    cursor.execute("""CREATE TABLE IF NOT EXISTS database(
        user_id INTEGER PRIMARY KEY AUTOINCREMENT,
        [group_number] INTEGER NOT NULL,
        active INTEGER DEFAULT(1)
    )""")
    # night INTEGER DEFAULT(0)
    # maybe INTEGER DEFAULT(0)
    # time_to INTEGER DEFAULT(30)
    # timeconnect INTEGER DEFAULT(0)
    connect.commit()
    try:
        bot.send_message(message.from_user.id, f'–ü—Ä–∏–≤—ñ—Ç üëã \n\nü§ñ –¶–µ–π –±–æ—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑–∞–¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ "–õ—å–≤—ñ–≤–æ–±–ª–µ–Ω–µ—Ä–≥–æ" –ø—Ä–æ –ø–ª–∞–Ω–æ–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É –≤–∞—à–æ–º—É –Ω–∞—Å–µ–ª–µ–Ω–æ–º—É –ø—É–Ω–∫—Ç—ñ. \n‚úèÔ∏è –ë–æ—Ç –±—É–¥–µ –≤—ñ–¥—Å–∏–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º –∑–∞ 30 —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n‚ùóÔ∏è –ë–æ—Ç –Ω–µ —î –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º! \n\nüìã –î–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è" –Ω–∏–∂—á–µ.', reply_markup=markup)
    except telebot.apihelper.ApiTelegramException:
        pass

# –§—É–Ω–∫—Ü—ñ—è —Ä–æ–∑—Å–∏–ª–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É
@bot.message_handler(commands=['send'])
@locked
def sendforall(message: types.Message):
    if message.from_user.id == 880691612:
        connect = connect_db()
        cursor = connect.cursor()
        results = cursor.execute("SELECT user_id FROM database").fetchall()
        text = message.text[6:]
        for row in results:
            active_value = row[0]
            set_active = cursor.execute("SELECT active FROM database WHERE user_id = ?", (active_value,))
            try:
                bot.send_message(row[0], text)
                if set_active != 1:
                    cursor.execute("UPDATE database SET active = ? WHERE user_id = ?", ("1", active_value))
            except:
                cursor.execute("UPDATE database SET active = ? WHERE user_id = ?", ("0", active_value))
        connect.commit()
    else:
        try:
            bot.send_message(message.from_user.id, "–î–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏ –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∞–¥–º—ñ–Ω–æ–º.")
        except telebot.apihelper.ApiTelegramException:
            pass

# –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Å–∫—ñ–ª—å–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≤ –±–æ—Ç—ñ
@bot.message_handler(commands=['stats'])
def stats(message: types.Message):
    if message.from_user.id == 880691612 or message.from_user.id == 720509891:
        connect = connect_db()
        cursor = connect.cursor()
        result_all = cursor.execute("SELECT COUNT(*) FROM database").fetchone()
        result_active = cursor.execute("SELECT COUNT(*) FROM database WHERE active = 1").fetchone()
        result_not_active = cursor.execute("SELECT COUNT(*) FROM database WHERE active = 0").fetchone()
        result_g1 = cursor.execute("SELECT COUNT(*) FROM database WHERE group_number = 1").fetchone()
        result_g2 = cursor.execute("SELECT COUNT(*) FROM database WHERE group_number = 2").fetchone()
        result_g3 = cursor.execute("SELECT COUNT(*) FROM database WHERE group_number = 3").fetchone()
        result_night = cursor.execute("SELECT COUNT(*) FROM database WHERE night = 1").fetchone()
        result_maybe = cursor.execute("SELECT COUNT(*) FROM database WHERE maybe = 1").fetchone()
        result_night_maybe = cursor.execute("SELECT COUNT(*) FROM database WHERE night = 1 AND maybe = 1").fetchone()
        result_time10 = cursor.execute("SELECT COUNT(*) FROM database WHERE time_to = 10").fetchone()
        result_time30 = cursor.execute("SELECT COUNT(*) FROM database WHERE time_to = 30").fetchone()
        result_time60 = cursor.execute("SELECT COUNT(*) FROM database WHERE time_to = 60").fetchone()
        result_bagged_users = cursor.execute("SELECT COUNT(*) FROM database WHERE maybe != 1 AND maybe != 0 AND time_to != 10 AND time_to != 30 AND time_to != 60").fetchone()
        bot.send_message(message.from_user.id, f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: \n\n–ê–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: {result_active[0]} \n–ù–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: {result_not_active[0]} \n\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ 1 –≥—Ä—É–ø–∏: {result_g1[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ 2 –≥—Ä—É–ø–∏: {result_g2[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ 3 –≥—Ä—É–ø–∏: {result_g3[0]} \n\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É—é—Ç—å—Å—è –Ω—ñ—á–Ω–∏–º–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏: {result_night[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É—é—Ç—å—Å—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏ –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: {result_maybe[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É—é—Ç—å—Å—è –Ω—ñ—á–Ω–∏–º–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏ —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: {result_night_maybe[0]} \n\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫–∏–º —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑–∞ 10 —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: {result_time10[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫–∏–º —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑–∞ 30 —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: {result_time30[0]} \n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫–∏–º —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑–∞ 60 —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: {result_time60[0]} \n\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –≤ —è–∫–∏—Ö –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ —Ç–∞ –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è: {result_bagged_users[0]} \n\n–í—Å—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: {result_all[0]}")
        connect.commit()
    else:
        try:
            bot.send_message(message.from_user.id, "–î–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏ –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∞–¥–º—ñ–Ω–æ–º.")
        except telebot.apihelper.ApiTelegramException:
            pass

# –†–æ–±–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫
@bot.message_handler(content_types='text')
@locked
def message_reply(message: types.Message):
    connect = connect_db()
    cursor = connect.cursor()
    person_id = message.chat.id

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
    if message.text == "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è":
        markup_group = types.InlineKeyboardMarkup()
        item1 = types.InlineKeyboardButton(text="–ì—Ä—É–ø–∞ 1", callback_data='group1')
        item2 = types.InlineKeyboardButton(text="–ì—Ä—É–ø–∞ 2", callback_data='group2')
        item3 = types.InlineKeyboardButton(text="–ì—Ä—É–ø–∞ 3", callback_data='group3')
        learngroup = types.InlineKeyboardButton(text="–î—ñ–∑–Ω–∞—Ç–∏—Å—å —Å–≤–æ—é –≥—Ä—É–ø—É", url='https://poweroff.loe.lviv.ua/gav_city3')
        markup_group.add(item1, item2, item3, learngroup)
        try:
            bot.send_message(message.chat.id, f'‚úÖ –î–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞ –í–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑ –Ω–æ–º–µ—Ä–æ–º –≤–∞—à–æ—ó –≥—Ä—É–ø–∏. \n‚ùì –©–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –Ω–æ–º–µ—Ä –≤–∞—à–æ—ó –≥—Ä—É–ø–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–î—ñ–∑–Ω–∞—Ç–∏—Å—å —Å–≤–æ—é –≥—Ä—É–ø—É", —Ç–∞ –ø–µ—Ä–µ–π—à–æ–≤—à–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º —ñ –≤–≤—ñ–≤—à–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—å —Å–≤–æ—é –≥—Ä—É–ø—É.', reply_markup=markup_group)
        except telebot.apihelper.ApiTelegramException:
            pass

# –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å
    elif message.text == "üîï –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è":
        if message.from_user.last_name is None:
            loginchat = f"{message.from_user.first_name}"
        else:
            loginchat = f"{message.from_user.first_name} {message.from_user.last_name}"
        cursor.execute("DELETE FROM 'database' WHERE 'user_id' = ?", (person_id,))
        try:
            bot.send_message(message.from_user.id, '‚ùå –í–∏ –≤—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—è –≤—ñ–¥ —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó. –î—è–∫—É—î–º–æ –∑–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–æ—Ç–∞!üò¢ \n\n–©–æ–± –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –∑–Ω–æ–≤—É, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è" –Ω–∏–∂—á–µ.', reply_markup=markup)
        except telebot.apihelper.ApiTelegramException:
            pass
        bot.send_message(880691612, f"<a href='tg://user?id={person_id}'>{loginchat}</a> –≤—ñ–¥–∫–ª—é—á–∏–≤—Å—è –≤—ñ–¥ —Å–ø–æ–≤—ñ—â–µ–Ω—å", parse_mode='HTML')

# –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ç–æ –∑ –≥—Ä–∞—Ñ—ñ–∫–æ–º –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
    elif message.text == "üñº –ü–æ–≤–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫(—Ñ–æ—Ç–æ)" or message.text == "üìñ –ü–æ–≤–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫(—Ñ–æ—Ç–æ)":
        data_photo = cursor.execute("SELECT group_number FROM database WHERE user_id = ?", (message.from_user.id,)).fetchone()
        try:
            if data_photo[0] == 1:
                photo = open('1group.png', 'rb')
                try:
                    bot.send_photo(message.from_user.id, photo)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_photo[0] == 2:
                photo = open('2group.png', 'rb')
                try:
                    bot.send_photo(message.from_user.id, photo)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_photo[0] == 3:
                photo = open('3group.png', 'rb')
                try:
                    bot.send_photo(message.from_user.id, photo)
                except telebot.apihelper.ApiTelegramException:
                    pass
        except:
            try:
                bot.send_message(message.from_user.id, "–ü–æ–º–∏–ª–∫–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –¥–æ –≤–∞—à–æ—ó –≥—Ä—É–ø–∏.")
            except telebot.apihelper.ApiTelegramException:
                pass

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
    elif message.text == "‚öô –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è":
        try:
            bot.send_message(message.from_user.id, "‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings)
        except telebot.apihelper.ApiTelegramException:
            pass

    elif message.text == "‚¨Ö –ù–∞–∑–∞–¥":
        try:
            bot.send_message(message.from_user.id, "–ú–ï–ù–Æ:", reply_markup=markup)
        except telebot.apihelper.ApiTelegramException:
            pass

    elif message.text == "/start":
        pass

    elif message.text == "/send":
        pass

    elif message.text == "/stats":
        pass

    else:
        try:
            bot.send_message(message.from_user.id, "–¶—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏ –Ω–µ —ñ—Å–Ω—É—î.")
        except telebot.apihelper.ApiTelegramException:
            pass

def checkworkingbot():
    global timeworked
    timeworked += 1
    bot.send_message(880691612, f"–ë–æ—Ç –ø—Ä–∞—Ü—é—î –≤–∂–µ {timeworked} –≥–æ–¥–∏–Ω.")

schedule.every(60).minutes.do(checkworkingbot)

# –§—É–Ω–∫—Ü—ñ—è —Ä–æ–∑—Å–∏–ª–∫–∏
@locked
def send(group, night, maybe, time_to, whattext):
    global group_number, text, results
    connect = connect_db()
    cursor = connect.cursor()
    if night == 0 and maybe == 0:
        results = cursor.execute(f"SELECT user_id FROM database WHERE group_number = {group} AND time_to = {time_to}").fetchall()
    elif night == 1 and maybe == 0:
        results = cursor.execute(f"SELECT user_id FROM database WHERE group_number = {group} AND night = {night} AND time_to = {time_to}").fetchall()
    elif night == 0 and maybe == 1:
        results = cursor.execute(f"SELECT user_id FROM database WHERE group_number = {group} AND maybe = {maybe} AND time_to = {time_to}").fetchall()
    else:
        results = cursor.execute(f"SELECT user_id FROM database WHERE group_number = {group} and night = {night} AND maybe = {maybe} AND time_to = {time_to}").fetchall()
    if group == 1:
        group_number = "1Ô∏è‚É£"
    elif group == 2:
        group_number = "2Ô∏è‚É£"
    elif group == 3:
        group_number = "3Ô∏è‚É£"
    if time_to == 10:
        time_to = 130
    elif time_to == 30:
        time_to = 150
    elif time_to == 60:
        time_to = 180
    howmuchtime1 = datetime.now() + timedelta(minutes=time_to)
    howmuchtime2 = howmuchtime1 + timedelta(hours=4)
    if whattext == 1:
        text = f"‚Äº –ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º {group_number} –≥—Ä—É–ø–∏ –ø–ª–∞–Ω—É—î—Ç—å—Å—è –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞ –≤ –ø–µ—Ä—ñ–æ–¥ –∑ {howmuchtime1.strftime('%H:%M')} –¥–æ {howmuchtime2.strftime('%H:%M')}!"
    elif whattext == 2:
        text = f"‚Äº –ú–æ–∂–ª–∏–≤–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞ –ø–ª–∞–Ω—É—î—Ç—å—Å—è –≤ –ø–µ—Ä—ñ–æ–¥ –∑ {howmuchtime1.strftime('%H:%M')} –¥–æ {howmuchtime2.strftime('%H:%M')} –¥–ª—è {group_number} –≥—Ä—É–ø–∏!"
    for row in results:
        active_value = row[0]
        set_active = cursor.execute(f"SELECT active FROM database WHERE user_id = {active_value}")
        try:
            bot.send_message(row[0], text)
            if set_active != 1:
                cursor.execute(f"UPDATE database SET active = 1 WHERE user_id = {active_value}")
        except:
            cursor.execute(f"UPDATE database SET active = 1 WHERE user_id = {active_value}")
            time.sleep(1)
    connect.commit()

#–†–æ–∑—Å–∏–ª–∫–∞ –¥–ª—è 1 –≥—Ä—É–ø–∏
schedule.every().sunday.at("22:00").do(send, 1, 1, 0, 60, 1)
schedule.every().sunday.at("22:30").do(send, 1, 1, 0, 30, 1)
schedule.every().sunday.at("22:50").do(send, 1, 1, 0, 10, 1)
schedule.every().monday.at("06:00").do(send, 1, 0, 1, 60, 2)
schedule.every().monday.at("06:30").do(send, 1, 0, 1, 30, 2)
schedule.every().monday.at("06:50").do(send, 1, 0, 1, 10, 2)
schedule.every().monday.at("10:00").do(send, 1, 0, 0, 60, 1)
schedule.every().monday.at("10:30").do(send, 1, 0, 0, 30, 1)
schedule.every().monday.at("10:50").do(send, 1, 0, 0, 10, 1)
schedule.every().monday.at("18:00").do(send, 1, 0, 1, 60, 2)
schedule.every().monday.at("18:30").do(send, 1, 0, 1, 30, 2)
schedule.every().monday.at("18:50").do(send, 1, 0, 1, 10, 2)

schedule.every().wednesday.at("22:00").do(send, 1, 1, 0, 60, 1)
schedule.every().wednesday.at("22:30").do(send, 1, 1, 0, 30, 1)
schedule.every().wednesday.at("22:50").do(send, 1, 1, 0, 10, 1)
schedule.every().thursday.at("06:00").do(send, 1, 0, 1, 60, 2)
schedule.every().thursday.at("06:30").do(send, 1, 0, 1, 30, 2)
schedule.every().thursday.at("06:50").do(send, 1, 0, 1, 10, 2)
schedule.every().thursday.at("10:00").do(send, 1, 0, 0, 60, 1)
schedule.every().thursday.at("10:30").do(send, 1, 0, 0, 30, 1)
schedule.every().thursday.at("10:50").do(send, 1, 0, 0, 10, 1)
schedule.every().thursday.at("18:00").do(send, 1, 0, 1, 60, 2)
schedule.every().thursday.at("18:30").do(send, 1, 0, 1, 30, 2)
schedule.every().thursday.at("18:50").do(send, 1, 0, 1, 10, 2)

schedule.every().saturday.at("22:00").do(send, 1, 1, 0, 60, 1)
schedule.every().saturday.at("22:30").do(send, 1, 1, 0, 30, 1)
schedule.every().saturday.at("22:50").do(send, 1, 1, 0, 10, 1)
schedule.every().sunday.at("06:00").do(send, 1, 0, 1, 60, 2)
schedule.every().sunday.at("06:30").do(send, 1, 0, 1, 30, 2)
schedule.every().sunday.at("06:50").do(send, 1, 0, 1, 10, 2)
schedule.every().sunday.at("10:00").do(send, 1, 0, 0, 60, 1)
schedule.every().sunday.at("10:30").do(send, 1, 0, 0, 30, 1)
schedule.every().sunday.at("10:50").do(send, 1, 0, 0, 10, 1)
schedule.every().sunday.at("18:00").do(send, 1, 0, 1, 60, 2)
schedule.every().sunday.at("18:30").do(send, 1, 0, 1, 30, 2)
schedule.every().sunday.at("18:50").do(send, 1, 0, 1, 10, 2)

schedule.every().tuesday.at("02:00").do(send, 1, 1, 1, 60, 2)
schedule.every().tuesday.at("02:30").do(send, 1, 1, 1, 30, 2)
schedule.every().tuesday.at("02:50").do(send, 1, 1, 1, 10, 2)
schedule.every().tuesday.at("06:00").do(send, 1, 1, 0, 60, 1)
schedule.every().tuesday.at("06:30").do(send, 1, 1, 0, 30, 1)
schedule.every().tuesday.at("06:50").do(send, 1, 1, 0, 10, 1)
schedule.every().tuesday.at("14:00").do(send, 1, 0, 1, 60, 2)
schedule.every().tuesday.at("14:30").do(send, 1, 0, 1, 30, 2)
schedule.every().tuesday.at("14:50").do(send, 1, 0, 1, 10, 2)
schedule.every().tuesday.at("18:00").do(send, 1, 0, 0, 60, 1)
schedule.every().tuesday.at("18:30").do(send, 1, 0, 0, 30, 1)
schedule.every().tuesday.at("18:50").do(send, 1, 0, 0, 10, 1)

schedule.every().friday.at("02:00").do(send, 1, 1, 1, 60, 2)
schedule.every().friday.at("02:30").do(send, 1, 1, 1, 30, 2)
schedule.every().friday.at("02:50").do(send, 1, 1, 1, 10, 2)
schedule.every().friday.at("06:00").do(send, 1, 1, 0, 60, 1)
schedule.every().friday.at("06:30").do(send, 1, 1, 0, 30, 1)
schedule.every().friday.at("06:50").do(send, 1, 1, 0, 10, 1)
schedule.every().friday.at("14:00").do(send, 1, 0, 1, 60, 2)
schedule.every().friday.at("14:30").do(send, 1, 0, 1, 30, 2)
schedule.every().friday.at("14:50").do(send, 1, 0, 1, 10, 2)
schedule.every().friday.at("18:00").do(send, 1, 0, 0, 60, 1)
schedule.every().friday.at("18:30").do(send, 1, 0, 0, 30, 1)
schedule.every().friday.at("18:50").do(send, 1, 0, 0, 10, 1)

schedule.every().tuesday.at("22:00").do(send, 1, 1, 1, 60, 2)
schedule.every().tuesday.at("22:30").do(send, 1, 1, 1, 30, 2)
schedule.every().tuesday.at("22:50").do(send, 1, 1, 1, 10, 2)
schedule.every().wednesday.at("02:00").do(send, 1, 1, 0, 60, 1)
schedule.every().wednesday.at("02:30").do(send, 1, 1, 0, 30, 1)
schedule.every().wednesday.at("02:50").do(send, 1, 1, 0, 10, 1)
schedule.every().wednesday.at("10:00").do(send, 1, 0, 1, 60, 2)
schedule.every().wednesday.at("10:30").do(send, 1, 0, 1, 30, 2)
schedule.every().wednesday.at("10:50").do(send, 1, 0, 1, 10, 2)
schedule.every().wednesday.at("14:00").do(send, 1, 0, 0, 60, 1)
schedule.every().wednesday.at("14:30").do(send, 1, 0, 0, 30, 1)
schedule.every().wednesday.at("14:50").do(send, 1, 0, 0, 10, 1)

schedule.every().friday.at("22:00").do(send, 1, 1, 1, 60, 2)
schedule.every().friday.at("22:30").do(send, 1, 1, 1, 30, 2)
schedule.every().friday.at("22:50").do(send, 1, 1, 1, 10, 2)
schedule.every().saturday.at("02:00").do(send, 1, 1, 0, 60, 1)
schedule.every().saturday.at("02:30").do(send, 1, 1, 0, 30, 1)
schedule.every().saturday.at("02:50").do(send, 1, 1, 0, 10, 1)
schedule.every().saturday.at("10:00").do(send, 1, 0, 1, 60, 2)
schedule.every().saturday.at("10:30").do(send, 1, 0, 1, 30, 2)
schedule.every().saturday.at("10:50").do(send, 1, 0, 1, 10, 2)
schedule.every().saturday.at("14:00").do(send, 1, 0, 0, 60, 1)
schedule.every().saturday.at("14:30").do(send, 1, 0, 0, 30, 1)
schedule.every().saturday.at("14:50").do(send, 1, 0, 0, 10, 1)

#–†–æ–∑—Å–∏–ª–∫–∞ –¥–ª—è 2 –≥—Ä—É–ø–∏
schedule.every().monday.at("02:00").do(send, 2, 1, 1, 60, 2)
schedule.every().monday.at("02:30").do(send, 2, 1, 1, 30, 2)
schedule.every().monday.at("02:50").do(send, 2, 1, 1, 10, 2)
schedule.every().monday.at("06:00").do(send, 2, 1, 0, 60, 1)
schedule.every().monday.at("06:30").do(send, 2, 1, 0, 30, 1)
schedule.every().monday.at("06:50").do(send, 2, 1, 0, 10, 1)
schedule.every().monday.at("14:00").do(send, 2, 0, 1, 60, 2)
schedule.every().monday.at("14:30").do(send, 2, 0, 1, 30, 2)
schedule.every().monday.at("14:50").do(send, 2, 0, 1, 10, 2)
schedule.every().monday.at("18:00").do(send, 2, 0, 0, 60, 1)
schedule.every().monday.at("18:30").do(send, 2, 0, 0, 30, 1)
schedule.every().monday.at("18:50").do(send, 2, 0, 0, 10, 1)

schedule.every().thursday.at("02:00").do(send, 2, 1, 1, 60, 2)
schedule.every().thursday.at("02:30").do(send, 2, 1, 1, 30, 2)
schedule.every().thursday.at("02:50").do(send, 2, 1, 1, 10, 2)
schedule.every().thursday.at("06:00").do(send, 2, 1, 0, 60, 1)
schedule.every().thursday.at("06:30").do(send, 2, 1, 0, 30, 1)
schedule.every().thursday.at("06:50").do(send, 2, 1, 0, 10, 1)
schedule.every().thursday.at("14:00").do(send, 2, 0, 1, 60, 2)
schedule.every().thursday.at("14:30").do(send, 2, 0, 1, 30, 2)
schedule.every().thursday.at("14:50").do(send, 2, 0, 1, 10, 2)
schedule.every().thursday.at("18:00").do(send, 2, 0, 0, 60, 1)
schedule.every().thursday.at("18:30").do(send, 2, 0, 0, 30, 1)
schedule.every().thursday.at("18:50").do(send, 2, 0, 0, 10, 1)

schedule.every().sunday.at("02:00").do(send, 2, 1, 1, 60, 2)
schedule.every().sunday.at("02:30").do(send, 2, 1, 1, 30, 2)
schedule.every().sunday.at("02:50").do(send, 2, 1, 1, 10, 2)
schedule.every().sunday.at("06:00").do(send, 2, 1, 0, 60, 1)
schedule.every().sunday.at("06:30").do(send, 2, 1, 0, 30, 1)
schedule.every().sunday.at("06:50").do(send, 2, 1, 0, 10, 1)
schedule.every().sunday.at("14:00").do(send, 2, 0, 1, 60, 2)
schedule.every().sunday.at("14:30").do(send, 2, 0, 1, 30, 2)
schedule.every().sunday.at("14:50").do(send, 2, 0, 1, 10, 2)
schedule.every().sunday.at("18:00").do(send, 2, 0, 0, 60, 1)
schedule.every().sunday.at("18:30").do(send, 2, 0, 0, 30, 1)
schedule.every().sunday.at("18:50").do(send, 2, 0, 0, 10, 1)

schedule.every().monday.at("22:00").do(send, 2, 1, 1, 60, 2)
schedule.every().monday.at("22:30").do(send, 2, 1, 1, 30, 2)
schedule.every().monday.at("22:50").do(send, 2, 1, 1, 10, 2)
schedule.every().tuesday.at("02:00").do(send, 2, 1, 0, 60, 1)
schedule.every().tuesday.at("02:30").do(send, 2, 1, 0, 30, 1)
schedule.every().tuesday.at("02:50").do(send, 2, 1, 0, 10, 1)
schedule.every().tuesday.at("10:00").do(send, 2, 0, 1, 60, 2)
schedule.every().tuesday.at("10:30").do(send, 2, 0, 1, 30, 2)
schedule.every().tuesday.at("10:50").do(send, 2, 0, 1, 10, 2)
schedule.every().tuesday.at("14:00").do(send, 2, 0, 0, 60, 1)
schedule.every().tuesday.at("14:30").do(send, 2, 0, 0, 30, 1)
schedule.every().tuesday.at("14:50").do(send, 2, 0, 0, 10, 1)

schedule.every().thursday.at("22:00").do(send, 2, 1, 1, 60, 2)
schedule.every().thursday.at("22:30").do(send, 2, 1, 1, 30, 2)
schedule.every().thursday.at("22:50").do(send, 2, 1, 1, 10, 2)
schedule.every().friday.at("02:00").do(send, 2, 1, 0, 60, 1)
schedule.every().friday.at("02:30").do(send, 2, 1, 0, 30, 1)
schedule.every().friday.at("02:50").do(send, 2, 1, 0, 10, 1)
schedule.every().friday.at("10:00").do(send, 2, 0, 1, 60, 2)
schedule.every().friday.at("10:30").do(send, 2, 0, 1, 30, 2)
schedule.every().friday.at("10:50").do(send, 2, 0, 1, 10, 2)
schedule.every().friday.at("14:00").do(send, 2, 0, 0, 60, 1)
schedule.every().friday.at("14:30").do(send, 2, 0, 0, 30, 1)
schedule.every().friday.at("14:50").do(send, 2, 0, 0, 10, 1)

schedule.every().tuesday.at("22:00").do(send, 2, 1, 0, 60, 1)
schedule.every().tuesday.at("22:30").do(send, 2, 1, 0, 30, 1)
schedule.every().tuesday.at("22:50").do(send, 2, 1, 0, 10, 1)
schedule.every().wednesday.at("06:00").do(send, 2, 0, 1, 60, 2)
schedule.every().wednesday.at("06:30").do(send, 2, 0, 1, 30, 2)
schedule.every().wednesday.at("06:50").do(send, 2, 0, 1, 10, 2)
schedule.every().wednesday.at("10:00").do(send, 2, 0, 0, 60, 1)
schedule.every().wednesday.at("10:30").do(send, 2, 0, 0, 30, 1)
schedule.every().wednesday.at("10:50").do(send, 2, 0, 0, 10, 1)
schedule.every().wednesday.at("18:00").do(send, 2, 0, 1, 60, 2)
schedule.every().wednesday.at("18:30").do(send, 2, 0, 1, 30, 2)
schedule.every().wednesday.at("18:50").do(send, 2, 0, 1, 10, 2)

schedule.every().friday.at("22:00").do(send, 2, 1, 0, 60, 1)
schedule.every().friday.at("22:30").do(send, 2, 1, 0, 30, 1)
schedule.every().friday.at("22:50").do(send, 2, 1, 0, 10, 1)
schedule.every().saturday.at("06:00").do(send, 2, 0, 1, 60, 2)
schedule.every().saturday.at("06:30").do(send, 2, 0, 1, 30, 2)
schedule.every().saturday.at("06:50").do(send, 2, 0, 1, 10, 2)
schedule.every().saturday.at("10:00").do(send, 2, 0, 0, 60, 1)
schedule.every().saturday.at("10:30").do(send, 2, 0, 0, 30, 1)
schedule.every().saturday.at("10:50").do(send, 2, 0, 0, 10, 1)
schedule.every().saturday.at("18:00").do(send, 2, 0, 1, 60, 2)
schedule.every().saturday.at("18:30").do(send, 2, 0, 1, 30, 2)
schedule.every().saturday.at("18:50").do(send, 2, 0, 1, 10, 2)

#–†–æ–∑—Å–∏–ª–∫–∞ –¥–ª—è 3 –≥—Ä—É–ø–∏
schedule.every().sunday.at("22:00").do(send, 3, 1, 1, 60, 2)
schedule.every().sunday.at("22:30").do(send, 3, 1, 1, 30, 2)
schedule.every().sunday.at("22:50").do(send, 3, 1, 1, 10, 2)
schedule.every().monday.at("02:00").do(send, 3, 1, 0, 60, 1)
schedule.every().monday.at("02:30").do(send, 3, 1, 0, 30, 1)
schedule.every().monday.at("02:50").do(send, 3, 1, 0, 10, 1)
schedule.every().monday.at("10:00").do(send, 3, 0, 1, 60, 2)
schedule.every().monday.at("10:30").do(send, 3, 0, 1, 30, 2)
schedule.every().monday.at("10:50").do(send, 3, 0, 1, 10, 2)
schedule.every().monday.at("14:00").do(send, 3, 0, 0, 60, 1)
schedule.every().monday.at("14:30").do(send, 3, 0, 0, 30, 1)
schedule.every().monday.at("14:50").do(send, 3, 0, 0, 10, 1)

schedule.every().wednesday.at("22:00").do(send, 3, 1, 1, 60, 2)
schedule.every().wednesday.at("22:30").do(send, 3, 1, 1, 30, 2)
schedule.every().wednesday.at("22:50").do(send, 3, 1, 1, 10, 2)
schedule.every().thursday.at("02:00").do(send, 3, 1, 0, 60, 1)
schedule.every().thursday.at("02:30").do(send, 3, 1, 0, 30, 1)
schedule.every().thursday.at("02:50").do(send, 3, 1, 0, 10, 1)
schedule.every().thursday.at("10:00").do(send, 3, 0, 1, 60, 2)
schedule.every().thursday.at("10:30").do(send, 3, 0, 1, 30, 2)
schedule.every().thursday.at("10:50").do(send, 3, 0, 1, 10, 2)
schedule.every().thursday.at("14:00").do(send, 3, 0, 0, 60, 1)
schedule.every().thursday.at("14:30").do(send, 3, 0, 0, 30, 1)
schedule.every().thursday.at("14:50").do(send, 3, 0, 0, 10, 1)

schedule.every().saturday.at("22:00").do(send, 3, 1, 1, 60, 2)
schedule.every().saturday.at("22:30").do(send, 3, 1, 1, 30, 2)
schedule.every().saturday.at("22:50").do(send, 3, 1, 1, 10, 2)
schedule.every().sunday.at("02:00").do(send, 3, 1, 0, 60, 1)
schedule.every().sunday.at("02:30").do(send, 3, 1, 0, 30, 1)
schedule.every().sunday.at("02:50").do(send, 3, 1, 0, 10, 1)
schedule.every().sunday.at("10:00").do(send, 3, 0, 1, 60, 2)
schedule.every().sunday.at("10:30").do(send, 3, 0, 1, 30, 2)
schedule.every().sunday.at("10:50").do(send, 3, 0, 1, 10, 2)
schedule.every().sunday.at("14:00").do(send, 3, 0, 0, 60, 1)
schedule.every().sunday.at("14:30").do(send, 3, 0, 0, 30, 1)
schedule.every().sunday.at("14:50").do(send, 3, 0, 0, 10, 1)

schedule.every().monday.at("22:00").do(send, 3, 1, 0, 60, 1)
schedule.every().monday.at("22:30").do(send, 3, 1, 0, 30, 1)
schedule.every().monday.at("22:50").do(send, 3, 1, 0, 10, 1)
schedule.every().tuesday.at("06:00").do(send, 3, 0, 1, 60, 2)
schedule.every().tuesday.at("06:30").do(send, 3, 0, 1, 30, 2)
schedule.every().tuesday.at("06:50").do(send, 3, 0, 1, 10, 2)
schedule.every().tuesday.at("10:00").do(send, 3, 0, 0, 60, 1)
schedule.every().tuesday.at("10:30").do(send, 3, 0, 0, 30, 1)
schedule.every().tuesday.at("10:50").do(send, 3, 0, 0, 10, 1)
schedule.every().tuesday.at("18:00").do(send, 3, 0, 1, 60, 2)
schedule.every().tuesday.at("18:30").do(send, 3, 0, 1, 30, 2)
schedule.every().tuesday.at("18:50").do(send, 3, 0, 1, 10, 2)

schedule.every().thursday.at("22:00").do(send, 3, 1, 0, 60, 1)
schedule.every().thursday.at("22:30").do(send, 3, 1, 0, 30, 1)
schedule.every().thursday.at("22:50").do(send, 3, 1, 0, 10, 1)
schedule.every().friday.at("06:00").do(send, 3, 0, 1, 60, 2)
schedule.every().friday.at("06:30").do(send, 3, 0, 1, 30, 2)
schedule.every().friday.at("06:50").do(send, 3, 0, 1, 10, 2)
schedule.every().friday.at("10:00").do(send, 3, 0, 0, 60, 1)
schedule.every().friday.at("10:30").do(send, 3, 0, 0, 30, 1)
schedule.every().friday.at("10:50").do(send, 3, 0, 0, 10, 1)
schedule.every().friday.at("18:00").do(send, 3, 0, 1, 60, 2)
schedule.every().friday.at("18:30").do(send, 3, 0, 1, 30, 2)
schedule.every().friday.at("18:50").do(send, 3, 0, 1, 10, 2)

schedule.every().wednesday.at("02:00").do(send, 3, 1, 1, 60, 2)
schedule.every().wednesday.at("02:30").do(send, 3, 1, 1, 30, 2)
schedule.every().wednesday.at("02:50").do(send, 3, 1, 1, 10, 2)
schedule.every().wednesday.at("06:00").do(send, 3, 1, 0, 60, 1)
schedule.every().wednesday.at("06:30").do(send, 3, 1, 0, 30, 1)
schedule.every().wednesday.at("06:50").do(send, 3, 1, 0, 10, 1)
schedule.every().wednesday.at("14:00").do(send, 3, 0, 1, 60, 2)
schedule.every().wednesday.at("14:30").do(send, 3, 0, 1, 30, 2)
schedule.every().wednesday.at("14:50").do(send, 3, 0, 1, 10, 2)
schedule.every().wednesday.at("18:00").do(send, 3, 0, 0, 60, 1)
schedule.every().wednesday.at("18:30").do(send, 3, 0, 0, 30, 1)
schedule.every().wednesday.at("18:50").do(send, 3, 0, 0, 10, 1)

schedule.every().saturday.at("02:00").do(send, 3, 1, 1, 60, 2)
schedule.every().saturday.at("02:30").do(send, 3, 1, 1, 30, 2)
schedule.every().saturday.at("02:50").do(send, 3, 1, 1, 10, 2)
schedule.every().saturday.at("06:00").do(send, 3, 1, 0, 60, 1)
schedule.every().saturday.at("06:30").do(send, 3, 1, 0, 30, 1)
schedule.every().saturday.at("06:50").do(send, 3, 1, 0, 10, 1)
schedule.every().saturday.at("14:00").do(send, 3, 0, 1, 60, 2)
schedule.every().saturday.at("14:30").do(send, 3, 0, 1, 30, 2)
schedule.every().saturday.at("14:50").do(send, 3, 0, 1, 10, 2)
schedule.every().saturday.at("18:00").do(send, 3, 0, 0, 60, 1)
schedule.every().saturday.at("18:30").do(send, 3, 0, 0, 30, 1)
schedule.every().saturday.at("18:50").do(send, 3, 0, 0, 10, 1)

#–†–æ–±–æ—Ç–∞ —Ä–æ–∑—Å–∏–ª–∫–∏(—ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫)
def threaded_function():
    while True:
        schedule.run_pending()
        time.sleep(1)

thread = Thread(target = threaded_function)
thread.daemon = True
thread.start()

@bot.callback_query_handler(func=lambda call: True)
@locked
def callback_inline(call):
    connect = connect_db()
    cursor = connect.cursor()
    person_id = call.message.chat.id
    message_id = call.message.message_id

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ 1 –≥—Ä—É–ø–∏
    if call.data == 'group1':
        if call.message.chat.last_name is None:
            loginchat = f"{call.message.chat.first_name}"
        else:
            loginchat = f"{call.message.chat.first_name} {call.message.chat.last_name}"
        cursor.execute(f"SELECT user_id FROM database WHERE user_id = {person_id}")
        data_call_group = cursor.fetchone()
        if data_call_group is None:
            cursor.execute("INSERT INTO database (user_id, group_number) VALUES(?, ?);", (person_id, "1",))
        else:
            cursor.execute("UPDATE database SET group_number = ? WHERE user_id = ?", ("1", person_id,))
        data_time_to = cursor.execute(f"SELECT time_to FROM database WHERE user_id = {person_id}").fetchone()
        data_night = cursor.execute(f"SELECT night FROM database WHERE user_id = {person_id}").fetchone()
        try:
            if data_night[0] == 0:
                night = "üîï –ó–∞–¥–ª—è –≤–∞—à–æ–≥–æ –∂ –∫–æ–º—Ñ–æ—Ä—Ç—É, —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–µ –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59)."
            elif data_night[0] == 1:
                night = "üåô –¢–∞–∫–æ–∂ –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59)."
        except:
            pass
        connect.commit()
        try:
            bot.edit_message_text(f'‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—è –¥–æ —Å–ø–æ–≤—ñ—â–µ–Ω—å 1Ô∏è‚É£ –≥—Ä—É–ø–∏! \n\nüïê –í—ñ–¥—Ç–µ–ø–µ—Ä –≤–∏ –±—É–¥–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–∞ {data_time_to[0]} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n{night} \n\n–©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ –≥—Ä—É–ø—É, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è" –Ω–∏–∂—á–µ.', reply_markup=None, chat_id=person_id, message_id=message_id)
            bot.send_message(880691612, f"<a href='tg://user?id={person_id}'>{loginchat}</a> –ø—ñ–¥–∫–ª—é—á–∏–≤—Å—è(-–ª–∞—Å—å) –¥–æ 1 –≥—Ä—É–ø–∏", parse_mode='HTML')
        except telebot.apihelper.ApiTelegramException:
            pass

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ 2 –≥—Ä—É–ø–∏
    elif call.data == 'group2':
        if call.message.chat.last_name is None:
            loginchat = f"{call.message.chat.first_name}"
        else:
            loginchat = f"{call.message.chat.first_name} {call.message.chat.last_name}"
        cursor.execute(f"SELECT user_id FROM database WHERE user_id = {person_id}")
        data_call_group = cursor.fetchone()
        if data_call_group is None:
            cursor.execute("INSERT INTO database (user_id, group_number) VALUES(?, ?);", (person_id, "2",))
        else:
            cursor.execute("UPDATE database SET group_number = ? WHERE user_id = ?", ("2", person_id,))
        data_time_to = cursor.execute(f"SELECT time_to FROM database WHERE user_id = {person_id}").fetchone()
        data_night = cursor.execute(f"SELECT night FROM database WHERE user_id = {person_id}").fetchone()
        try:
            if data_night[0] == 0:
                night = "üîï –ó–∞–¥–ª—è –≤–∞—à–æ–≥–æ –∂ –∫–æ–º—Ñ–æ—Ä—Ç—É, —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–µ –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59)."
            elif data_night[0] == 1:
                night = "üåô –¢–∞–∫–æ–∂ –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59)."
        except:
            pass
        connect.commit()
        try:
            bot.edit_message_text(f'‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—è –¥–æ —Å–ø–æ–≤—ñ—â–µ–Ω—å 2Ô∏è‚É£ –≥—Ä—É–ø–∏! \n\nüïê –í—ñ–¥—Ç–µ–ø–µ—Ä –≤–∏ –±—É–¥–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–∞ {data_time_to[0]} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n{night} \n\n–©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ –≥—Ä—É–ø—É, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è" –Ω–∏–∂—á–µ.', reply_markup=None, chat_id=person_id, message_id=message_id)
            bot.send_message(880691612, f"<a href='tg://user?id={person_id}'>{loginchat}</a> –ø—ñ–¥–∫–ª—é—á–∏–≤—Å—è(-–ª–∞—Å—å) –¥–æ 1 –≥—Ä—É–ø–∏", parse_mode='HTML')
        except telebot.apihelper.ApiTelegramException:
            pass

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ 3 –≥—Ä—É–ø–∏
    elif call.data == 'group3':
        if call.message.chat.last_name is None:
            loginchat = f"{call.message.chat.first_name}"
        else:
            loginchat = f"{call.message.chat.first_name} {call.message.chat.last_name}"
        cursor.execute(f"SELECT user_id FROM database WHERE user_id = {person_id}")
        data_call_group = cursor.fetchone()
        if data_call_group is None:
            cursor.execute("INSERT INTO database (user_id, group_number) VALUES(?, ?);", (person_id, "3",))
        else:
            cursor.execute("UPDATE database SET group_number = ? WHERE user_id = ?", ("3", person_id,))
        data_time_to = cursor.execute(f"SELECT time_to FROM database WHERE user_id = {person_id}").fetchone()
        data_night = cursor.execute(f"SELECT night FROM database WHERE user_id = {person_id}").fetchone()
        try:
            if data_night[0] == 0:
                night = "üîï –ó–∞–¥–ª—è –≤–∞—à–æ–≥–æ –∂ –∫–æ–º—Ñ–æ—Ä—Ç—É, —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–µ –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59). –í–∫–ª—é—á–∏—Ç–∏ —ó—Ö –º–æ–∂–Ω–∞ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö."
            elif data_night[0] == 1:
                night = "üåô –¢–∞–∫–æ–∂ –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59). –í–∏–∫–ª—é—á–∏—Ç–∏ —ó—Ö –º–æ–∂–Ω–∞ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö."
            else:
                pass
        except:
            pass
        connect.commit()
        try:
            bot.edit_message_text(f'‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—è –¥–æ —Å–ø–æ–≤—ñ—â–µ–Ω—å 3Ô∏è‚É£ –≥—Ä—É–ø–∏! \n\nüïê –í—ñ–¥—Ç–µ–ø–µ—Ä –≤–∏ –±—É–¥–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–∞ {data_time_to[0]} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n{night}\n\n–©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ –≥—Ä—É–ø—É, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "‚úÖ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è" –Ω–∏–∂—á–µ.', reply_markup=None, chat_id=person_id, message_id=message_id)
            bot.send_message(880691612, f"<a href='tg://user?id={person_id}'>{loginchat}</a> –ø—ñ–¥–∫–ª—é—á–∏–≤—Å—è(-–ª–∞—Å—å) –¥–æ 3 –≥—Ä—É–ø–∏", parse_mode='HTML')
        except telebot.apihelper.ApiTelegramException:
            pass

# Call_data –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
# –ù—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
    elif call.data == 'night_notice':
        cursor.execute(f"SELECT night FROM database WHERE user_id = {person_id}")
        data_check_night = cursor.fetchone()
        try:
            if data_check_night[0] == 0:
                markup_check_night_off = types.InlineKeyboardMarkup(row_width=1)
                item1 = types.InlineKeyboardButton("üåô –í–∫–ª—é—á–∏—Ç–∏ –Ω—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è", callback_data="night_notice_on")
                item2 = types.InlineKeyboardButton("‚¨Ö –ù–∞–∑–∞–¥", callback_data="back_to_settings")
                markup_check_night_off.add(item1, item2)
                try:
                    bot.edit_message_text("üåô –ù–Ü–ß–ù–Ü –°–ü–û–í–Ü–©–ï–ù–ù–Ø: \n\n‚Ä¢ –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω—ñ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó, –±–æ—Ç –±—É–¥–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59). \n‚ùå –ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç —Ç–∞–∫—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤—ñ–¥–∫–ª—é—á–µ–Ω—ñ, –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ:", reply_markup=markup_check_night_off, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_check_night[0] == 1:
                markup_check_night_on = types.InlineKeyboardMarkup(row_width=1)
                item1 = types.InlineKeyboardButton("üåô –í–∏–∫–ª—é—á–∏—Ç–∏ –Ω—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è", callback_data="night_notice_off")
                item2 = types.InlineKeyboardButton("‚¨Ö –ù–∞–∑–∞–¥", callback_data="back_to_settings")
                markup_check_night_on.add(item1, item2)
                try:
                    bot.edit_message_text("üåô –ù–Ü–ß–ù–Ü –°–ü–û–í–Ü–©–ï–ù–ù–Ø: \n\n‚úÖ –ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ –Ω—ñ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥(–∑ 00:00 –¥–æ 07:59) –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ. \n–î–ª—è –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ:", reply_markup=markup_check_night_on, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
        except:
            pass
        connect.commit()

    elif call.data == 'night_notice_on':
        cursor.execute(f"UPDATE database SET night = 1 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text("‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –≤–∫–ª—é—á–∏–ª–∏ –Ω—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

    elif call.data == 'night_notice_off':
        cursor.execute(f"UPDATE database SET night = 0 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text("‚ùå –í–∏ –≤—ñ–¥–∫–ª—é—á–∏–ª–∏ –Ω—ñ—á–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

# –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
    elif call.data == 'maybe_notice':
        cursor.execute(f"SELECT maybe FROM database WHERE user_id = {person_id}")
        data_check_maybe = cursor.fetchone()
        try:
            if data_check_maybe[0] == 0:
                markup_check_maybe_off = types.InlineKeyboardMarkup(row_width=1)
                item1 = types.InlineKeyboardButton("üîò –í–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è", callback_data="maybe_notice_on")
                item2 = types.InlineKeyboardButton("‚¨Ö –ù–∞–∑–∞–¥", callback_data="back_to_settings")
                markup_check_maybe_off.add(item1, item2)
                try:
                    bot.edit_message_text("üîò –°–ü–û–í–Ü–©–ï–ù–ù–Ø –ü–†–û –ú–û–ñ–õ–ò–í–Ü –í–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø: \n\n‚Ä¢ –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω—ñ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó, –±–æ—Ç –±—É–¥–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è(–¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Ü–µ –Ω–∞ —Ñ–æ—Ç–æ –≤–∞—à–æ–≥–æ –≥—Ä–∞—Ñ—ñ–∫—É).\n‚ùå –ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç –¥–∞–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤—ñ–¥–∫–ª—é—á–µ–Ω—ñ, –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ:", reply_markup=markup_check_maybe_off, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_check_maybe[0] == 1:
                markup_check_maybe_on = types.InlineKeyboardMarkup(row_width=1)
                item1 = types.InlineKeyboardButton("üîò –í–∏–∫–ª—é—á–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è", callback_data="maybe_notice_off")
                item2 = types.InlineKeyboardButton("‚¨Ö –ù–∞–∑–∞–¥", callback_data="back_to_settings")
                markup_check_maybe_on.add(item1, item2)
                try:
                    bot.edit_message_text("üîò –°–ü–û–í–Ü–©–ï–ù–ù–Ø –ü–†–û –ú–û–ñ–õ–ò–í–Ü –í–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø: \n\n‚úÖ –ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ. \n–î–ª—è –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ:", reply_markup=markup_check_maybe_on, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
            else:
                pass
        except:
            pass
        connect.commit()

    elif call.data == 'maybe_notice_on':
        cursor.execute(f"UPDATE database SET maybe = 1 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text("‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –≤–∫–ª—é—á–∏–ª–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

    elif call.data == 'maybe_notice_off':
        cursor.execute(f"UPDATE database SET maybe = 0 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text("‚ùå –í–∏ –≤—ñ–¥–∫–ª—é—á–∏–ª–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

# –ß–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
    elif call.data == "change_time_to_notice":
        cursor.execute(f"SELECT time_to FROM database WHERE user_id = {person_id}")
        data_check_time_to = cursor.fetchone()
        markup_check_time_to_off = types.InlineKeyboardMarkup(row_width=1)
        item1 = types.InlineKeyboardButton("üïê 10 —Ö–≤–∏–ª–∏–Ω", callback_data="set_10min")
        item2 = types.InlineKeyboardButton("üïì 30 —Ö–≤–∏–ª–∏–Ω", callback_data="set_30min")
        item3 = types.InlineKeyboardButton("üïî 60 —Ö–≤–∏–ª–∏–Ω", callback_data="set_60min")
        item4 = types.InlineKeyboardButton("‚¨Ö –ù–∞–∑–∞–¥", callback_data="back_to_settings")
        markup_check_time_to_off.add(item1, item2, item3, item4)
        try:
            if data_check_time_to[0] == 10:
                time_to_off_stiker = "üîü"
                try:
                    bot.edit_message_text(f"üïê –ß–ê–° –î–û –ù–ê–î–°–ò–õ–ê–ù–ù–Ø –°–ü–û–í–Ü–©–ï–ù–ù–Ø: \n\n‚Ä¢ –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å, –≤—ñ–¥ 10 –¥–æ 60 —Ö–≤–∏–ª–∏–Ω.\n‚Ä¢ –ù–∞ —Ü–µ–π –º–æ–º–µ–Ω—Ç —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –∑–∞ {time_to_off_stiker} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞, —â–æ–± –∑–º—ñ–Ω–∏—Ç–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –æ–¥–Ω—É –∑ –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂—á–µ:", reply_markup=markup_check_time_to_off, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_check_time_to[0] == 30:
                time_to_off_stiker = "3Ô∏è‚É£0Ô∏è‚É£"
                try:
                    bot.edit_message_text(f"üïê –ß–ê–° –î–û –ù–ê–î–°–ò–õ–ê–ù–ù–Ø –°–ü–û–í–Ü–©–ï–ù–ù–Ø: \n\n‚Ä¢ –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å, –≤—ñ–¥ 10 –¥–æ 60 —Ö–≤–∏–ª–∏–Ω.\n‚Ä¢ –ù–∞ —Ü–µ–π –º–æ–º–µ–Ω—Ç —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –∑–∞ {time_to_off_stiker} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞, —â–æ–± –∑–º—ñ–Ω–∏—Ç–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –æ–¥–Ω—É –∑ –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂—á–µ:", reply_markup=markup_check_time_to_off, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
            elif data_check_time_to[0] == 60:
                time_to_off_stiker = "6Ô∏è‚É£0Ô∏è‚É£"
                try:
                    bot.edit_message_text(f"üïê –ß–ê–° –î–û –ù–ê–î–°–ò–õ–ê–ù–ù–Ø –°–ü–û–í–Ü–©–ï–ù–ù–Ø: \n\n‚Ä¢ –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å, –≤—ñ–¥ 10 –¥–æ 60 —Ö–≤–∏–ª–∏–Ω.\n‚Ä¢ –ù–∞ —Ü–µ–π –º–æ–º–µ–Ω—Ç —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º –≤–∞–º –±—É–¥—É—Ç—å –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –∑–∞ {time_to_off_stiker} —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞, —â–æ–± –∑–º—ñ–Ω–∏—Ç–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –æ–¥–Ω—É –∑ –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂—á–µ:", reply_markup=markup_check_time_to_off, chat_id=person_id, message_id=message_id)
                except telebot.apihelper.ApiTelegramException:
                    pass
        except:
            pass
        connect.commit()

    elif call.data == 'set_10min':
        cursor.execute(f"UPDATE database SET time_to = 10 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text('‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–∏–ª–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –¥–æ üîü —Ö–≤–∏–ª–∏–Ω. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:', reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

    elif call.data == 'set_30min':
        cursor.execute(f"UPDATE database SET time_to = 30 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text('‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–∏–ª–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –¥–æ 3Ô∏è‚É£0Ô∏è‚É£ —Ö–≤–∏–ª–∏–Ω. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:', reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

    elif call.data == 'set_60min':
        cursor.execute(f"UPDATE database SET time_to = 60 WHERE user_id = {person_id}")
        try:
            bot.edit_message_text('‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–∏–ª–∏ —á–∞—Å –¥–æ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å –¥–æ Ô∏è6Ô∏è‚É£0Ô∏è‚É£ —Ö–≤–∏–ª–∏–Ω. \n\n‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:', reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass
        connect.commit()

    elif call.data == 'back_to_settings':
        try:
            bot.edit_message_text("‚öô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø:", reply_markup=markup_settings, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass

    elif call.data == 'back':
        try:
            bot.edit_message_text("–ú–ï–ù–Æ:", reply_markup=None, chat_id=person_id, message_id=message_id)
        except telebot.apihelper.ApiTelegramException:
            pass

bot.polling()